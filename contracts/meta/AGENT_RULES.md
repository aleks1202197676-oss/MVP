# AGENT_RULES

## Primary context
- Агент обязан считать `latest_bundle.zip` основным переносимым контекстом проекта.
- `AGENTS.md` — мастер-источник по трекам, фазам исполнения и scope-guard.
- `.agents/skills/*` используются как операционные дополнения и не должны противоречить `AGENTS.md`.

## Execution protocol
1. Сначала preflight (без патча).
2. Затем implement в согласованном scope.
3. Затем verify по acceptance-командам.

## Codex META-RULES (living)
- PREFLIGHT всегда содержит 2–3 опции (A/B/C) и явный выбор минимально-безопасного пути.
- Если без уточнения нельзя безопасно продолжать — задать ровно 1 clarifying question.
- Каждый ответ должен включать раздел **SUGGESTIONS** (идеи, не реализованные в этом патче).
- Scope-guard обязателен: `git diff --name-only` должен совпадать с allowlist до commit и до PR.
- До начала код-изменений проверять пересечение с открытыми Codex PR; при вероятном overlap — STOP early и эскалация (поведение как в A14).

## Track discipline
- Следовать трекам `PR-A*`, `PR-F*`, `PR-G*`.
- Избегать cross-track изменений.
- При конфликте правил — выбирать более строгий вариант и явно сообщать причину.

## Quality bar
- Детерминизм и повторяемость важнее “магии”.
- Короткая диагностика вместо шумных логов.
- Никаких placeholder-артефактов и фиктивных путей.

## Operator queue preference
- Где возможно, оформлять работу через `tools/operator/**` как очередь задач/патчей для прозрачного handoff.
